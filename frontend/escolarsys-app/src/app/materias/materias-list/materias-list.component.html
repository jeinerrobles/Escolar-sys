<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3><i class="bi bi-book"></i> Gestión de Materias</h3>

    <button class="btn btn-primary" (click)="crearNueva()">
      <i class="bi bi-plus-circle"></i> Nueva Materia
    </button>
  </div>

  <div *ngIf="cargando" class="text-center my-4">
    <div class="spinner-border text-primary"></div>
    <p class="mt-2">Cargando materias...</p>
  </div>

  <table *ngIf="!cargando" class="table table-striped table-hover">
    <thead class="table-light">
      <tr>
        <th>Materia</th>
        <th>Profesor</th>
        <th>Grados Asignados</th>
        <th>Acciones</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let m of materias">
        <td>{{ m.nombre }}</td>

        <td>
          <span *ngIf="m.profesor; else noProfesor">
            {{ m.profesor.nombre }}
          </span>
          <ng-template #noProfesor>
            <span class="text-muted">Sin profesor</span>
          </ng-template>
        </td>

        <td>
          <!-- Badges para múltiples grados -->
          <span *ngFor="let g of m.grados" class="badge bg-info text-dark me-1">
            {{ g.nombre }}
          </span>
        </td>

        <td class="text-center">
          <button class="btn btn-outline-warning btn-sm me-2" [routerLink]="['/materias/editar', m.id]">
            <i class="bi bi-pencil-square"></i> 
          </button>
          <button class="btn btn-outline-danger btn-sm" (click)="eliminar(m.id)">
            <i class="bi bi-trash"></i> 
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
